\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}
\usepackage{ulem}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section*{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
18-01-23 & 1.0 & Added Content\\
\bottomrule
\end{tabularx}

~\newpage

\section*{Symbols, Abbreviations and Acronyms}

See SRS Documentation at  \href{https://github.com/jordanbierbrier/capstone/blob/main/docs/SRS/SRS.pdf}{\textit{SRS.pdf Document Link}}.


\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for Synesthesia Wear, a wearable product that assists users by using signal processing on gathered sounds 
to provide appropriate feedback (via vibrations) to the user according to inputted sound configuration settings. As a result, this gives the users peace of mind knowing that if their attention 
is needed (doorbell, ring, name call, etc.), Synesthesia Wear will be able to alert them.


Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \href{https://github.com/jordanbierbrier/capstone}{\textit{Team 26 Capstone GitHub Repository}}.

\section{Notation}



The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the \href{https://github.com/jordanbierbrier/capstone/blob/main/docs/Design/SoftArchitecture/MG.pdf}{\textit{Module Guide Document}} for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding Module} & ~ \\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module} & \sout{Login Module}\\
& Bluetooth connection Module\textcolor{red}{M2}\\
& Keyword Selection Module\textcolor{red}{M3}\\
& Output Signal Module\textcolor{red}{M4}\\
& Profile Module\textcolor{red}{M5}\\ 
& Battery Status Module\textcolor{red}{M6}\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision Module} & {Sound Classification Module}\textcolor{red}{M7}\\
& Bluetooth Communication Module\textcolor{red}{M8}\\
& Microphone Module\textcolor{red}{M9}\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage
~\newpage

\section{MIS of Battery Status} \label{Module}

\subsection{Module}

\sout{Battery Status}

\subsection{Uses}

Indicator

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Low Battery & N/A & Low Status & Low Battery \\
\hline
Battery Level & N/A & Percentage & Battery Status \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

N/A

\subsubsection{Environment Variables}

keyOutput : {key.Low Battery, key.Battery Status}

\subsubsection{Assumptions}

Battery will always have some charge on it.

\subsubsection{Access Routine Semantics}

\noindent
\begin{itemize}
\item transition: N/A 
\item output: Battery level
\item exception: N/A
\end{itemize}

\subsubsection{Local Functions}
\begin{itemize}
\item get level(int level)
\item battery condition(int cond)
\end{itemize}

\section{MIS of Battery Status} \label{Module}

\subsection{Module}

Sound Classification \textcolor{red}{M7}
\newline
\textcolor{red}{Bluetooth communication M8}

\subsection{Uses}

Categorize detected sounds 

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Sound level & Microphone & decibels & High/Low Level \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

N/A

\subsubsection{Environment Variables}

keyOutput : {key.microphone} \textcolor{red}{$\mathbb{N}$ }
\newline
keyOutput : {key.decibels} \textcolor{red}{$\mathbb{N}$}

\subsubsection{Assumptions}

Surrounding sound levels are null compared to required input level.

\subsubsection{Access Routine Semantics}

\noindent
\begin{itemize}
\item transition: N/A 
\item output: decibels
\item exception: N/A
\end{itemize}

\subsubsection{Local Functions}
\begin{itemize}
\item sound level(float volume)
\item sorting volume()
\end{itemize}



\section{MIS of Login Module} \label{Login Module}

\subsection{Module}

\sout{Login Type}

\subsection{Uses}
N/A

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
authorize & keyInput & Authorized & \\
\hline
login & keyInput &  & Not\_A\_Character \\
\hline
switchCue & keyInput &  & Not\_Cueable \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

Authorized: Authorized is a boolean that is true when the correct credentials are entered and false otherwise.

\subsubsection{Environment Variables}

keyInput: \{key.Enter, key.AlphabetCharacters, key.LeftClick\}

\subsubsection{Assumptions}

The Synesthesia Wear application is successfully installed on the user's device and the login page has loaded onto the screen. 

\subsubsection{Access Routine Semantics}

\noindent switchCue(key.LeftClick):
\begin{itemize}
\item transition: mouseLocation.navigate() 
\item output: None
\item exception: Not\_Cueable 
\end{itemize}

\noindent login(key.AlphabetCharacters):
\begin{itemize}
\item transition: username.addCharacter() or password.addCharacter()
\item output: None
\item exception: Not\_A\_Character 
\end{itemize}


\noindent authorize(key.Enter):
\begin{itemize}
\item transition: login.submit() 
\item output: Authorized
\item exception: None 
\end{itemize}

\newpage 

\section{MIS of Keyword Selection Module} \label{Keyword Selection Module}
\subsection{Module}
Keyword Selection Type

\subsection{Uses}
\begin{itemize}
  \item Profile Module \textcolor{red}{M5}
  \item Bluetooth Communication Module \textcolor{red}{M8}
  \end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
save & keyInput & Saved & Mouse\_Not\_On\_Save\_Button\\
\hline
keyword & keyInput &  & Not\_A\_Character \\
\hline
switchCue & keyInput &  & Not\_Cueable \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

Saved: Saved is a boolean that is true when the ``Save'' button has been pressed and false otherwise.

\subsubsection{Environment Variables}

keyInput: \{key.AlphabetCharacters, key.LeftClick\}

\subsubsection{Assumptions}

The Synesthesia Wear application is successfully installed on the user's device, the user was able to log into the app, 
and the sound configuration settings page is loaded onto the screen.

\subsubsection{Access Routine Semantics}

\noindent switchCue(key.LeftClick):
\begin{itemize}
\item transition: mouseLocation.navigate() 
\item output: None
\item exception: Not\_Cueable 
\end{itemize}

\noindent keyword(key.AlphabetCharacters)\textcolor{red}{char}:
\begin{itemize}
\item transition: keyword.addCharacter()
\item output: None
\item exception: Not\_A\_Character 
\end{itemize}

\noindent save(key.LeftClick):
\begin{itemize}
\item transition: keyword.save() 
\item output: Saved
\item exception: Mouse\_Not\_On\_Save\_Button 
\end{itemize}

\newpage

\section{MIS of Bluetooth Communication Module} \label{BTComuModule} 


\subsection{Module}

BTComuModule

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}
DataTx:\{ BT.send()\} 
\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{3cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
RecvNewClass & DataRx & - & Class\_Full \\
\hline
RmClass & DataRx & - & Class\_Empty \\
\hline
UpdatePref & DataRx & - & - \\
\hline
SendBattV & BattV & DataTx & - \\
\hline

\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None
\subsubsection{Environment Variables}

\sout{BattV: \{AnalogRead(BatteryVolt)\}}\\ 
DataRx: \{BT.recieve(T1),BT.recieve(T2),BT.recieve(T3)\}\textcolor{red}{$\mathbb{N}$}

\subsubsection{Assumptions}

Connection with the application is already establised. Bluetooth tries to automatically reconnect if the application is disconnected. 

\subsubsection{Access Routine Semantics}

\noindent RecvNewClass():
\begin{itemize}
\item transition: if(DataRx == T1) then addclass(dataRx) 
\item output: None 
\item exception: Class\_Full
\end{itemize}

\noindent RmClass():
\begin{itemize}
\item transition: if(DataRx == T2) then rmclass(dataRx)  
\item output: None 
\item exception: Class\_Empty 
\end{itemize}

\noindent UpdatePref():
\begin{itemize}
\item transition: if(DataRx == T3) then prefchange(DataRx.class,DataRx.pref)
\item output: None
\item exception: None 
\end{itemize}

\sout{\noindent SendBattV(BattV)}:
\begin{itemize}
\item transition: None 
\item output: DataTx == BattV 
\item exception:  
\end{itemize}

\newpage

\section{MIS of Microphone Module} \label{Microphone Module} 

\subsection{Module}

MicroMod\\
\textcolor{red}{Bluetooth Communication M9}

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}

None 

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
updateData & SoundIN,CLKINT & SoundData & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

SoundData - Array of sound inputs recorded at every sample interval

\subsubsection{Environment Variables}

SoundIN: \{ Digital.Read(Digital\_Microphone) \}\textcolor{red}{$\mathbb{R}$}\\
CLKINT: \{clk.interupt(sample time)\}

\subsubsection{Assumptions}

Clock interrupt is already set up to issue interrupts every 1/(sample frequency) 

\subsubsection{Access Routine Semantics}

\begin{itemize}
\item transition: N/A 
\item output: decibels
\item exception: N/A
\end{itemize}

\newpage 

\section{MIS of Output Signal Module} \label{Output Signal Module}
\subsection{Module}
Output Signal Module
\subsection{Uses}
\begin{itemize}
  \item Sound Classification Module \textcolor{red}{M7}
  \end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
onVolt & (Boolean, Class\_Id) &  & Null\_class\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

current\_Volt: Integer of the current voltage being supplied to the motor

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

We are assuming that when this module is called that the battery has sufficient charge to power the motor for the called upon number of requests

\subsubsection{Access Routine Semantics}

\noindent onVolt(Boolean onOFF, Class\_id Current):
\begin{itemize}
\item transition: Count = Current $\vert$ While count $!=$ 0 $\implies$ (current\_volt $\equiv$ 0 $\land$ onOFF) $\implies$ current\_Volt = 5 $\vert$ count $-=$ count $\vert$ current\_Volt = 0  
\item output: None
\item exception: Class\_id $\equiv$ Null 
\end{itemize}

\newpage


\section{MIS of Bluetooth Connection Module} \label{Bluetooth Connection Module}
\subsection{Module}
Bluetooth Connection Module
\subsection{Uses}
N/A
\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Find\_Device & Boolean onClick & Device\_ID Array & device\_NotFound\\
Connect\_Device & (Boolean, onClick Device\_ID) &  & \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item known\_Device: Device\_ID \textcolor{red}{$\mathbb{N}$}
  \item Paired\_Device
\end{itemize}


\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

We assume that the mobile device that the user has the application on has a bluetooth module.

\subsubsection{Access Routine Semantics}

\noindent Find\_Device(Boolean onClick):
\begin{itemize}
\item transition: (Onclick $\equiv$ True) $\implies$ Found\_Devices = {} $\implies$ Found\_Devices.Add(known\_Devices) $\implies$ Found\_Devices.Add(device\_id1) 
\item output: Found\_Devices(known\_Device, device\_id1, device\_id2 â€¦ device\_idN)
\item exception: Device\_NotFound 
\end{itemize}

\noindent Connect\_Device(Boolean onClick):
\begin{itemize}
\item transition: (Onclick $\equiv$ True) $\implies$ Paired\_Device $=$ device\_id2 
\item output: None
\item exception: None
\end{itemize}

\newpage



\section{MIS of Profile Module} \label{profile Module}
\subsection{Module}
Profile Module
\subsection{Uses}
\sout{Login Module}
\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Set\_First\_Name & String &  & Type\_Error \\
\hline
Set\_Last\_Name & String &  &  Type\_Error\\
\hline
Get\_First\_Name &  & String & Null\_Exception \\
\hline
Get\_Last\_Name &  & String & Null\_Exception \\
\hline
change\_Password & String &  & Type\_Error \\
\hline
Change\_Username & String &  &  Type\_Error\\
\hline
Get\_Username &  & String & Null\_Exception\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item first\_name
  \item last\_name
  \item password
  \item username
\end{itemize}


\subsubsection{Environment Variables}

key\_input(keyboard)

\subsubsection{Assumptions}

We are assuming that the user has either a touchscreen keyboard or an external keyboard.

\subsubsection{Access Routine Semantics}

\noindent Set\_first\_name(String Name):
\begin{itemize}
\item transition: first\_name = Name
\item output: None
\item exception: Type\_Error 
\end{itemize}

\noindent Set\_last\_name(String Name):
\begin{itemize}
\item transition: last\_name = Name
\item output: None
\item exception: Type\_Error 
\end{itemize}

\noindent Get\_first\_name():
\begin{itemize}
\item transition: None
\item output: First\_name
\item exception: Null\_Exception 
\end{itemize}

\noindent Get\_last\_name():
\begin{itemize}
\item transition: None
\item output: last\_name
\item exception: Null\_Exception 
\end{itemize}


\noindent Change\_password(String Name):
\begin{itemize}
\item transition: password = Name
\item output: None
\item exception: Type\_Error 
\end{itemize}

\noindent Change\_username(String Name):
\begin{itemize}
\item transition: username = Name
\item output: None
\item exception: Type\_Error 
\end{itemize}

\noindent Get\_username():
\begin{itemize}
\item transition: None
\item output: username
\item exception: Null\_Exception 
\end{itemize}

\newpage




\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\section{Appendix} \label{Appendix}


\end{document}