\documentclass{article}

\usepackage{tabularx}
\usepackage{booktabs}

\title{Reflection Report on \progname}

\author{\authname}

\date{}

\input{../Comments}
\input{../Common}

\begin{document}

\maketitle

\newpage

\section{Changes in Response to Feedback}

\subsection{SRS and Hazard Analysis}

The project team made several important changes to the non-functional requirements. First, non-functional requirements were changed by adding more details while removing functional traits found in some non-functional requirements. This change helped to clarify the non-functional requirements and made them easier to understand. Additionally, a functional requirement was added to test the Bluetooth functional requirement, which will help ensure that the product is working correctly. The team also changed the style requirements for some of the non-functional requirements, which will help to ensure consistency throughout the document. Some of the requirements were deemed out of scope and removed, which helped to streamline the document and focus on the most critical requirements. In some cases, high-level requirements were given more specifications about the outcomes of the requirements. Lastly for the SRS, mathematical signs were added to the document to ensure consistency with the MIS document. These changes will help ensure that the non-functional requirements document is accurate, easy to understand, and consistent with other project documents. Firstly, formatting was changed in the hazard analysis to increase readability of the documents tables. The safety requirements were reviewed and changed to ensure there was no room for interpretations. Finally, we removed access requirements and integrity requirements which were no longer following consistency of other document. We also removed access requirements and integrity requirements which were no longer following the consistency of other documents. Additionally, implementation of a confidence level was created to notify the user about the accuracy of the information provided. The project team has also specified what environmental conditions should be met for the product to function optimally. To make the document consistent with other project documents, the revision history was changed accordingly. Finally, the proof of concept was refined by narrowing down the major problems that the team wants to address. This will help the team stay focused on the most important issues and deliver a high-quality product.


\subsection{Design and Design Documentation}

Important changes to the Design document were made which ensured transparency, more information about the hardware that was added, helping to clarify details about the hardware components. The team also resolved typo errors to ensure the document is accurate and professional. Referencing between modules was made more clear, helping the reader understand what modules are required and how they are connected. Dependencies of modules were given more attention to ensure there is enough information for each module to run successfully, reducing the risk of errors. Associated decisions were changed to follow the mapping that was done. Changes to the secrets and services of behavior-hiding and software decisions, ensuring that these areas are properly addressed in the document. Finally, the anticipated changes part of the MG document was given further detail, ensuring that the team is prepared for any potential changes that may occur during the project. These changes will help to ensure that the MG document is accurate, comprehensive, and easy to understand.


\subsection{VnV Plan and Report}

Information was added to section 6 of the VnV plan which is consistent with the final demo of the product. The roles of team members were redefined to clearly mention each team member's responsibilities. Additionally, the team defined how certain tests would be conducted and the tools that would be used to conduct them, leaving no room for interpretation of the tests. Tests were refined to be specific to individual modules, rather than the entire system, increasing the confidence of the tests. Out-of-scope descriptions were added to tests that were not possible to test, ensuring that the document is comprehensive and realistic. Finally, requirements in the traceability matrix were added to reflect the hazard analysis, helping to ensure that the VnV plan adequately addresses all safety concerns. These changes will help to ensure that the VnV plan is accurate, comprehensive, and effective in testing the system.


\section{Design Iteration (LO11)}

We initially began by researching the current solutions that were on the market. Throughout that research, we found three main competitors that solve a problem that closely resembles our problem statement. First off, we had the Apple Watch, this product is used to alert a user when they are in an environment that is above a user specified decibel threshold. The main objective of this product is to preserve the hearing of their users by allowing them to avoid environments where the noise level can cause damage. Secondly, we had hearing aids. Hearing aids are used to amplify the sound entering the ear. They are used for individuals who are hard of hearing and allows them to hear noise in their environments that is below the decibels that they can naturally hear. Finally, the last products were Neo-sensory devices. These devices take in a real time stream of sound from the environment and turn that into a physical signal that can be transcribed back to the original sentence. Overall, we did not feel that any of these products fully encompassed the issue that we were trying to solve and they were all at a higher price point than what we were aiming to achieve.
\newline 
\newline Following that, we spoke with relevant experts in this space. First off, we spoke with Katherine Hesson-Bolton, who works at the student accessibility office here at McMaster. She was very useful in assisting us with what language we should be using for a topic of this sensitivity. She also helped us better define our problem statement and use cases. Secondly, we spoke with Dr. Martin von Mohrenschildt, who is a professor in the Computing and Software department here at McMaster. He helped us with the preliminary stages of our technical solution by giving us insight on which machine learning models we should use and the math that is going to be involved in the solution.
\newline
\newline These all led us to our initial design decisions where it was decided that we wanted to classify specific sounds that are tailored towards an individual. The goal was to extract keywords from a continuous audio stream and induce haptic feedback to the user when we had a detection of a keyword. We also made the decision to have an accompanying mobile application so the user can interact and tailor the device for their needs. Finally, we also decided on having the final product fit a form factor that would be wearable so that we can ensure that it is portable and nonintrusive.
\newline
\newline At this point in the design process, we needed a proof-of-concept (POC) to show that the initial design decisions we proposed were viable. For our POC we created a Python script that extracted Mel-frequency cepstral coefficients from an audio input and detected certain sounds. This proved that we would be able to extract keywords from a stream of audio and send a signal based on those sounds. Furthermore, at this stage we also created an interactive Android application. The application included a login page, keyword selection page, pairing page and a home page. This POC proved to us that we would be able to have the user cater the product to their needs, as well as that we could extract keywords from a  stream of audio. Some of the feedback we received from the POC included needing to implement real-time sound processing, process the sound on an actual device (microcontroller), and connectivity between a device and the application. With the feedback provided, we began work on the revision zero of the product.
\newline
\newline For revision zero of the product, we began looking at the hardware needed to create a wearable device that can provide feedback. We ended up settling on a form factor that would resemble a watch and we 3D printed an enclosure that would house the rest of the components. We also decided on the other needed components which included an Arduino Nano BLE, Lipo Battery, vibration motor, and a Lipo Charger. The Arduino Nano BLE was chosen for several reasons. Firstly, the form factor was small and was viable for something that is wearable. Additionally, it included a Bluetooth module which we would use to facilitate the communication between the application and device. The board also had the processing power to classify the keywords in real-time. Finally, it also had a built-in microphone that we would use to capture real time streams of audio. We chose the vibration motor as a means to provide the user with haptic feedback and because of its small form factor. Finally, the Lipo Battery and Lipo Charger were chosen to power the device and ensure that it is reusable and portable.
Design decisions also changed during our implementation of revision zero. For example, we decided to process the sound signals directly on the hardware rather than on the mobile device. This was done for two main reasons first off, the BLE connection did not have enough bandwidth to continuously stream audio from the device to the phone and back without significant delays. Secondly, we noticed that by storing the pre-trained model directly on the Arduino, it would have sufficient processing power to classify the sounds. Furthermore, we also chose to eliminate some potential avenues for our solution. For example, we decided not to go with a speech-to-text model since it would have constrained us to just words rather than general sounds.  
\newline
\newline Throughout all of these stages we did rigorous testing to ensure that our product was performing at the level that we desired. For example, we did testing to ensure that the connectivity of the device remains intact at different distances. We tested different variabilities in speech including different accents, genders etc. We also respoke with Katherine and updated her on our progress and got further feedback from her. Finally, we also did survey testing with potential users to learn more about how we were performing with respect to comfortability, portability, non-intrusiveness, and user friendliness.      
\newline
\newline All the steps and revisions have led us to the current product. Currently the product is in a form factor that is wearable and comfortable. The device can communicate with the application through a Bluetooth connection. The application allows the user to customize what keywords they want to be notified for. We have also added the functionality of the user choosing what confidence level (for detection) they want the model to run at. Finally, we have also removed some redundancies in the application that were deemed unnecessary through both feedback and testing, an example being removing the login page. Overall, the current product meets our requirements and our initial goals while still leaving room for improvement in the future.

\section{Design Decisions (LO12)}

\subsection{Processing implementation}
There were several avenues to take to process and classify the environment sound. For example, the most simple way is to take the Fourier Transform of a signal, to get meaningful features from the sound (as opposed to random noise), and then classify with a classifier (like nearest neighbours). However, after speaking with Dr. Martin von Mohrenschildt, he presented a more meaningful feature extractor for audio signals, namely, Mel-frequency cepstral coefficients (MFCCs). These coefficients better represent audio signals over time (as opposed to the general Fourier Transform) and as a result, are a popular choice for signal processing. Furthermore, we decided to train a neural network as these models can easily learn high dimensional data (as there are many learning parameters). Additionally, this is a popular choice amongst the audio engineering community. One assumption that we had to make is that the audio clip that we are classifying is less than one second. We could have increased the time, however, that would have made our model less accurate as we introduce more features. Additionally, we trained the neural network to pre-recorded audio signals due to constraints, which will be discussed below. 
\subsection{Wearable device}
A few of our goals (and requirements) that have remained from the beginning are to create a device which is compact, portable, lightweight, and comfortable. During initial planning of the project, there was discussion about creating a ring for the wearable device. However, this was quickly disregarded as we were constrained by the hardware components. For example, unless spending significant time and money, it is difficult to get a miniature battery and microcontroller (with sufficient processing power). The next, and most recent implementation is a bracelet. The bracelet is more of an appropriate size as it can easily fit the hardware components. The current bracelet has dimensions of 6.5 cm x 5 cm x 4 cm. Therefore, the device still met our goals (compact, portable, lightweight, and comfortable) as the size remained minimal (and through additional tests). However, in the future, we would like to decrease the height of the bracelet (from 4cm down to 2cm). The largest device which prohibited this was the battery. In future implementations we plan on reducing the battery size.
\subsection{Pre-training}
As mentioned above, our sound classification uses a pre-trained neural network. Prior to this implementation, we considered adding live training as opposed to a pre-trained model. There were two reasons this strategy was not implemented. Firstly, if live training was implemented then it would be trained on the microcontroller. However, a small microcontroller does not have sufficient processing power and memory to train a classification model. Secondly, we were constrained by time, so this avenue could not be researched to its full extent. To expand, it is possible to create custom hardware which would provide capabilities to do live training on a microcontroller, but given our tight time constraint, this option could not be implemented. Additionally, the microcontroller we used was designed and optimized to run inference (inference meaning -  what does the trained neural network output from a specific input) as opposed to being trained (called TensorFlow Lite). 
\subsection{Classifying on microcontroller}
As we were constrained by the processing capabilities of the microcontroller, we explored the idea of sending the audio signal from the microcontroller to the mobile device (via Bluetooth) for classification. In this sense we would have more memory and processing power at our disposal. However, this option was not viable as the Bluetooth connection (from our microcontroller) had limited bandwidth so we could not continually send audio signals. This was not a big problem, however, since the audio signals are able to be processed and classified on the microcontroller without issues of processing power or memory usage. 
\subsection{Text-to-speech not implemented}
Another avenue that was considered was to use speech-to-text as opposed to the MFCC extraction. This implementation was not continued for two reasons. Firstly (which is mentioned above), our problem is to classify any sound, like a doorbell or a fire alarm, as opposed to just speech. Using speech-to-text limits what can be detected, to only speech and not general sounds. Next, using speech-to-text requires connection to the internet. This is because speech-to-text uses an API call to retrieve the text from audio. In this regard, we would be constraining the problem by requiring the user to always have an internet connection. For these two reasons, we opted with the MFCC extraction and classification (it can classify general sounds and does not require an internet connection).
\subsection{Application to interact with wearable device}
Another design decision we took was to implement a mobile application. The use of the mobile application allows the user to indirectly interact with the wearable device. For example, the user can activate different sounds to detect, pair the device, and change the confidence level for the detection. However, in this design decision we are assuming that the user has access to a mobile phone. It is required to use a mobile phone to use the device. 
\subsection{Haptic feedback and blinking LED}
When a sound is detected, the wearable device provides a specific haptic feedback (one, two, three, or four vibrations). For this implementation, we are assuming that the user can feel the vibrations. Tests were conducted with users to determine if the vibration could be felt (which they could). In case the vibration could not be detected by the user, we have included a blinking LED, which follows the same pattern as the haptic feedback (one, two, three, or four blinks). As a result, the user has two different indicators to notify them that a specific sound has been detected. 

\section{Economic Considerations (LO23)}

We do believe that there is a substantial market for our product whether that be with our projected users or with use cases we have yet to discover. Currently, the product can be very useful for individuals who are hard of hearing, deaf and even just suffering from age related hearing loss. Having a reliable alert system for small day-to-day life choices can be substantial in enriching the lives of our users. Furthermore, in an enterprise setting increasing a person’s awareness of their surroundings without being intrusive can have significant safety improvements. For example, imagine a loud work environment where hearing protection is worn, if a fire alarm goes off the individual's hearing is greatly impaired and he may not hear it. However, if they were wearing our device, they can be alerted of the alarm through vibrations without having to risk the health of their ears.
\newline
\newline With a few improvements and some more revisions we believe we can begin marketing our product. Primarily, we would need to reduce the size of the device which in turn would increase the non-intrusiveness and portability. With the smaller form factory we can market the device as a safety precaution as mentioned above or just for day-to-day use for anyone with obstructed hearing.
\newline
\newline Currently, the product we have came in at an estimated cost of approximately \$85. If we were producing a version of the product that we planned to sell we believe we could lower the cost sustainably. Rather than using an expensive Arduino, we would create our own custom microcontroller that only had the functionalities that we require. Initially, the design of the microcontroller would be expensive but after the initial cost we would have a much cheaper alternative. Furthermore, the casing of the device is currently 3D printed plastic. We would switch to a mold manufacturing style for the casing. This would greatly improve the quality of the product and, once the price of creating a mold is covered, greatly reduce the cost of the casing.  An estimate for creating the mold for a product of our complexity would be approximately \$5,000 on the higher end. Overall, we believe that there would be an upfront cost of roughly \$10,000 to create a custom hardware version of our product and pay for the research and development costs. However, on a unit-by-unit basis we believe that the cost of producing the product would be roughly \$40 dollars. If we took a 30\% markup on the product the retail price of the device would be \$52 dollars. This would give us \$12 dollars of profit per unit sold. The breakeven point of the product in units would be \$10,000/\$12 which is approximately 834 units. Any number of units above 834 would equate to \$12 of profit for the company.

\section{Reflection on Project Management (LO24)}

\subsection{How Does Your Project Management Compare to Your Development Plan}

Our team meeting plan stated that we would be meeting Wednesday at 4:30pm on a weekly basis. In reality, the team adopted a meeting schedule based on a per-need basis. While we did meet periodically on the scheduled Wednesday time slot there were many occasions where we would have to meet many times throughout the week. The scheduling of the extra meeting was communicated through both our Facebook messenger group as well as on our Discord. As stated in the team communication plan our main sources of communication included the Discord server as well as our Facebook messenger group. We found that this worked well for us as evident by the timely response times from all team members. Furthermore, we also utilized Github commit messages and issues to highlight situations that needed attention. With respect to team member roles we mostly stuck with the specified roles in the development plan. However, Udeep Shah also took on the role of hardware developer while Azriel Gingoyon also was involved in the embedded system development. Finally, our workflow plan stated that we would be using Github while utilizing branches, pull requests, issue tracking and continuous integration testing. Throughout the project, we adhered to that workflow plan where we had multiple branches set up in the repository and all changes were committed and merged with the main branch. However, we did not end up implementing a continuous integration testing strategy. We felt as though local testing was sufficient for our use cases since the product was not actively being deployed.
\newline \newline
The technology that we planned on using included the programming languages of C for the embedded systems code and Java for the application. The project ended up using both of those languages for the purposes stated in the development plan. The integrated development environments that we planned on using included Visual Studio Code and Eclipse. In reality, we ended up using Visual Studio Code for the embedded systems development and Android Studio for the application. Linter was also used for ensuring a consistent coding format style throughout. As mentioned earlier we also planned on using continuous integration but opted not to for the aforementioned reasons. Finally, the hardware components that were mentioned under technology were all used minus the analog-to-digital converter since our final implementation of the product did not require it. In addition to the mentioned hardware components, we also required the use of a 3D printer as well as a Bluetooth module.  


\subsection{What Went Well?}

Our choice of communication technology worked out very well for our team. The Facebook messenger group was a reliable method of communicating smaller messages that warranted a quick reply. With the entirety of the team having the technology available on their phones we were able to respond and answer questions in a timely fashion. The discord server was also very helpful for longer form meetings as well as for file transfer. The discord was used more for planned meetings as we utilized the voice channel features of the program. Furthermore, our choice of IDEs allowed us to easily write and deploy code since they were both intuitive and the team had prior experience using them.


\subsection{What Went Wrong?}

While using Github we ran into some issues with merge conflicts that had to be resolved which led to some time delays when trying to push updates to the repository. Furthermore, our choice of using Android Studio slightly delayed the project since some team members needed to learn the software since they had no prior experience using it. Finally, we opted to use google docs for planning out and distributing how we were going to complete some of the documentation. This led to some issues when it came to translating the google docs work into the latex format that was required in this course.


\subsection{What Would you Do Differently Next Time?}

For our next project I think we would make a more rigorous schedule where there are work packages due for certain deadlines. In this project we mainly focused on only having deadlines for the completion of work where that work was a course deliverable. When it came to doing the remainder of the work such as the actual coding and hardware implementation we did not have well laid out deadlines. Rather, we had more of a reactive mentality, when we had a major milestone coming up such as the POC or the Rev 0. To elaborate, we found ourselves in multiple situations where we would have to do a major amount of work with only a few days before a milestone. In a future project, we would put more of an emphasis on continued work. Rather than waiting for a deadline to come up we would be more proactive. For example, on weeks where nothing was due we would incorporate some self imposed deadlines in order to stay on top of the workload. 
\newline \newline 
We also believe that there would be a benefit of better utilizing the expertise of each team member to create a learning environment. Given the project scope and the course duration we were under a time sensitive project. This led to the distribution of work being given to the team members that had the most experience in a given task. In the future we believe that with improved time management we can afford to allow some team members to tackle problems that they may not be well versed in. With the help of the team members with the expertise we could create an enhanced learning environment where each team member could expand their knowledge into different avenues. 


\end{document}